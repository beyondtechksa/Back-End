[www]
user = www-data
group = www-data

; Listening on a TCP socket
listen = 127.0.0.1:9000

; Process manager configuration
pm = dynamic
pm.max_children = 140        ; Max concurrent requests (adjust based on memory calculation)
pm.start_servers = 20        ; Number of processes on startup
pm.min_spare_servers = 10    ; Minimum number of idle processes
pm.max_spare_servers = 30    ; Maximum number of idle processes

; Recycle processes periodically
pm.max_requests = 1000

; Performance and debugging settings
request_terminate_timeout = 30s   ; Kill requests running longer than 30 seconds
request_slowlog_timeout = 10s     ; Log requests taking longer than 10 seconds
slowlog = /var/log/php-fpm/$pool.log.slow

; Logging
access.log = /var/log/php-fpm/$pool.access.log

; Adjust based on application needs
rlimit_files = 1024
rlimit_core = 0
